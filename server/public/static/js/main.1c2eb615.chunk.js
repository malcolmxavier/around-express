(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(16)},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),i=(a(5),a(10)),s=a(1),u=a(7),l=a.n(u);var p=function(){return r.a.createElement("div",{className:"Header"},r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:l.a,alt:"Around The U.S. text logo",className:"logo"})))},m=r.a.createContext();var d=function(e){var t=r.a.useContext(m);return r.a.createElement(m.Provider,{value:t},r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar"},r.a.createElement("img",{src:t.avatar,alt:"Profile avatar",className:"avatar avatar_profile"}),r.a.createElement("div",{className:"avatar__edit-overlay"},r.a.createElement("button",{className:"edit-button edit-button_avatar","aria-label":"Edit Avatar",onClick:e.onEditAvatar}))),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__name"},t.name),r.a.createElement("button",{className:"edit-button edit-button_profile","aria-label":"Edit Profile",onClick:e.onEditProfile}),r.a.createElement("p",{className:"profile__occupation"},t.about)),r.a.createElement("button",{className:"add-button","aria-label":"Add Card",onClick:e.onAddCard})),r.a.createElement("section",{className:"photo-grid"},r.a.createElement("ul",{className:"photo-grid__list"},e.children))))};var f=function(e){var t=r.a.useContext(m),a=e.card.owner._id===t._id,n=e.card.likes.some((function(e){return e._id===t._id}));return r.a.createElement("li",{className:"photo-grid__item",key:e.id},r.a.createElement("div",{className:"photo-grid__image",style:{backgroundImage:"url(".concat(e.image,")")},onClick:function(){e.onCard(e.image,e.title)}}),r.a.createElement("button",{className:a?"trash-button":"trash-button_hidden","aria-label":"Delete Card",onClick:e.onDeleteCard}),r.a.createElement("div",{className:"photo-grid__description"},r.a.createElement("h3",{className:"photo-grid__label"},e.title),r.a.createElement("div",{className:"photo-grid__likes"},r.a.createElement("button",{className:n?"like-button like-button_clicked":"like-button","aria-label":"Like Card",onClick:function(){e.onCardLike(e.card)}}),r.a.createElement("p",{className:"photo-grid__likes-count"},e.likesCount))))};var _=function(){return r.a.createElement("div",{className:"Footer"},r.a.createElement("footer",{className:"footer"},r.a.createElement("p",null,"\xa9 2020 Around The U.S.")))};var h=function(e){return r.a.createElement("div",null,r.a.createElement("section",{className:e.isOpen?"popup popup_type_".concat(e.name," popup_opened"):"popup popup_type_".concat(e.name)},r.a.createElement("div",{className:"popup__container popup__container_type_form"},r.a.createElement("button",{className:"close-button","aria-label":"Close ".concat(e.action," Popup"),onClick:e.onClose}),r.a.createElement("h2",{className:"popup__title"},e.title),r.a.createElement("form",{className:"popup__form popup__form_type_".concat(e.name),onSubmit:e.onSubmit},e.children,r.a.createElement("button",{className:"popup__button ".concat(e.button,"-button"),type:"submit","aria-label":"".concat(e.action),onClick:e.onClose})))))};var b=function(e){var t=r.a.useContext(m),a=r.a.useState(t.avatar),n=Object(s.a)(a,2),o=n[0],c=n[1],i=r.a.useRef(o);return r.a.createElement(h,{name:"edit-avatar",action:"Edit Avatar",title:"Change profile picture",button:"save",onClose:e.closeAllPopups,isOpen:e.isOpen,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar(o)}},r.a.createElement("input",{name:"avatar",id:"avatar-url",className:"popup__input popup__input_type_url",type:"url",placeholder:"Image URL",required:!0,ref:i,onChange:function(e){c(i.current.value)}}),r.a.createElement("span",{id:"avatar-url-error",className:"popup__error"}))};var v=function(e){var t=r.a.useContext(m),a=r.a.useState(t.name),n=Object(s.a)(a,2),o=n[0],c=n[1],i=r.a.useState(t.about),u=Object(s.a)(i,2),l=u[0],p=u[1];return r.a.useEffect((function(){c(t.name),p(t.about)}),[t]),r.a.createElement(h,{name:"edit-profile",action:"Edit Profile",title:"Edit profile",button:"save",onClose:e.onClose,isOpen:e.isOpen,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:l})}},r.a.createElement("input",{name:"userName",id:"profile-name",className:"popup__input popup__input_type_name",type:"text",placeholder:"Name",required:!0,minLength:"2",maxLength:"40",onChange:function(e){c(e.target.value)}}),r.a.createElement("span",{id:"profile-name-error",className:"popup__error"}),r.a.createElement("input",{name:"userOccupation",id:"profile-occupation",className:"popup__input popup__input_type_occupation",type:"text",placeholder:"About Me",required:!0,minLength:"2",maxLength:"200",onChange:function(e){p(e.target.value)}}),r.a.createElement("span",{id:"profile-occupation-error",className:"popup__error"}))};var E=function(e){var t=r.a.useState({}),a=Object(s.a)(t,2),n=a[0],o=a[1],c=r.a.useState({}),i=Object(s.a)(c,2),u=i[0],l=i[1];return r.a.createElement(h,{name:"add-card",action:"Add Card",title:"New Place",button:"create",onClose:e.onClose,isOpen:e.isOpen,onSubmit:function(t){t.preventDefault(),e.onAddCardSubmit({name:n,link:u})}},r.a.createElement("input",{name:"name",id:"card-label",className:"popup__input popup__input_type_label",type:"text",placeholder:"Label",required:!0,minLength:"1",maxLength:"30",onChange:function(e){o(e.target.value)}}),r.a.createElement("span",{id:"card-label-error",className:"popup__error"}),r.a.createElement("input",{name:"link",id:"card-url",className:"popup__input popup__input_type_url",type:"url",placeholder:"Image URL",required:!0,onChange:function(e){l(e.target.value)}}),r.a.createElement("span",{id:"card-url-error",className:"popup__error"}))};var g=function(e){return r.a.createElement("div",null,r.a.createElement("section",{className:e.isOpen?"popup popup_type_image popup_opened":"popup popup_type_image"},r.a.createElement("div",{className:"popup__container popup__container_type_image"},r.a.createElement("figure",{className:"figure"},r.a.createElement("button",{className:"close-button","aria-label":"Close Image Popup",onClick:e.onClose}),r.a.createElement("img",{className:"popup__image",alt:e.title,src:e.image}),r.a.createElement("figcaption",{className:"popup__caption"},e.title)))))},C=a(8),k=a(9),N=new(function(){function e(t){var a=t.baseURL,n=t.headers;Object(C.a)(this,e),this._baseURL=a,this._headers=n}return Object(k.a)(e,[{key:"getUserInfo",value:function(){return fetch(this._baseURL+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(e.status+" Error: "+e.statusText)}))}},{key:"setUserInfo",value:function(e,t){return fetch(this._baseURL+"/users/me",{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject(e.status+" Error: "+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"setUserAvatar",value:function(e){return fetch(this._baseURL+"/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject(e.status+" Error: "+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"getCardList",value:function(){return fetch(this._baseURL+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(e.status+" Error: "+e.statusText)}))}},{key:"addCard",value:function(e){var t=e.name,a=e.link;return fetch(this._baseURL+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:a})}).then((function(e){return e.ok?e.json():Promise.reject(e.status+" Error: "+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"removeCard",value:function(e){return fetch(this._baseURL+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject(e.status+" Error: "+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"addCardLike",value:function(e){return fetch(this._baseURL+"/cards/likes/"+e,{headers:this._headers,method:"PUT"}).then((function(e){return e.ok?e.json():Promise.reject(e.status+" Error: "+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"removeCardLike",value:function(e){return fetch(this._baseURL+"/cards/likes/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject(e.status+" Error: "+e.statusText)})).catch((function(e){return console.log(e)}))}}]),e}())({baseURL:"https://around.nomoreparties.co/v1/group-3",headers:{authorization:"bfb84dd3-54e8-4642-a5bf-7fe819e5fd4b","Content-Type":"application/json"}});var y=function(){var e=r.a.useState({avatar:"",name:"",about:""}),t=Object(s.a)(e,2),a=t[0],n=t[1],o=r.a.useState([]),c=Object(s.a)(o,2),u=c[0],l=c[1],C=r.a.useState(!1),k=Object(s.a)(C,2),y=k[0],O=k[1],j=r.a.useState(!1),L=Object(s.a)(j,2),S=L[0],U=L[1],P=r.a.useState(!1),x=Object(s.a)(P,2),A=x[0],T=x[1],R=r.a.useState(!1),w=Object(s.a)(R,2),D=w[0],I=w[1],q=r.a.useState(!1),J=Object(s.a)(q,2),H=J[0],B=J[1],M=r.a.useState(""),W=Object(s.a)(M,2),z=W[0],F=W[1],$=r.a.useState(""),G=Object(s.a)($,2),K=G[0],Q=G[1];function V(e){e.likes.some((function(e){return e._id===a._id}))?N.removeCardLike(e._id).then((function(t){var a=u.map((function(a){return a._id===e._id?t:a}));l(a)})).catch((function(e){return console.log(e)})):N.addCardLike(e._id).then((function(t){var a=u.map((function(a){return a._id===e._id?t:a}));l(a)})).catch((function(e){return console.log(e)}))}function X(e,t){B(!0),F(e),Q(t)}function Y(){I(!0)}function Z(){O(!1),U(!1),T(!1),I(!1),B(!1)}return r.a.useEffect((function(){N.getCardList().then((function(e){l(e)})).catch((function(e){return console.log(e)}))}),[l,u]),r.a.useEffect((function(){N.getUserInfo().then((function(e){n(e)})).catch((function(e){return console.log(e)}))}),[n]),r.a.createElement(m.Provider,{value:a},r.a.createElement("div",{className:"page"},r.a.createElement(p,null),r.a.createElement(d,{onEditAvatar:function(){O(!0)},onEditProfile:function(){U(!0)},onAddCard:function(){T(!0)}},u.map((function(e){return r.a.createElement(f,{card:e,key:e._id,id:e._id,image:e.link,title:e.name,likesCount:e.likes.length,onCardLike:V,onDeleteCard:Y,onCard:X})}))),r.a.createElement(b,{isOpen:y,onClose:Z,onUpdateAvatar:function(e){N.setUserAvatar(e).then(n({avatar:e,name:a.name,about:a.about})).then(Z()).catch((function(e){return console.log(e)}))}}),r.a.createElement(v,{isOpen:S,onClose:Z,onUpdateUser:function(e){var t=e.name,r=e.about;N.setUserInfo(t,r).then(n({avatar:a.avatar,name:t,about:r})).then(Z()).catch((function(e){return console.log(e)}))}}),r.a.createElement(E,{isOpen:A,onClose:Z,onAddCardSubmit:function(e){var t=e.name,a=e.link;N.addCard({name:t,link:a}).then((function(e){l([].concat(Object(i.a)(u),[e]))})).then(Z()).catch((function(e){return console.log(e)}))}}),r.a.createElement(g,{image:z,title:K,onClose:Z,isOpen:H}),r.a.createElement(h,{name:"delete-card",action:"Delete Card",title:"Are you sure?",button:"yes",onClose:Z,isOpen:D,onSubmit:function(e){N.removeCard(e._id).then((function(t){var a=u.filter((function(t){return t._id!==e._id}));l(a)})).catch((function(e){return console.log(e)}))}}),r.a.createElement(_,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,a){},7:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"}},[[11,1,2]]]);
//# sourceMappingURL=main.1c2eb615.chunk.js.map